<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:body>
	<ui:include name="home" src="/template/template.xhtml" />
		<p:growl id="growl"></p:growl>

			<p:commandButton icon="fa fa-plus" value="Make a reservation" styleClass="ui-priority-primary"
							 id="add" action="#{bookingManagedBean.insert}"/>

			<br/>

			<h:form id="form">


				<p:dataTable id="table" value="#{bookingManagedBean.bookings}"
					var="booking" >
					<p:column headerText="Check in">
						<p:outputLabel value="#{booking.checkIn}"></p:outputLabel>
					</p:column>

					<p:column headerText="Check out">
						<p:outputLabel value="#{booking.checkOut}"></p:outputLabel>
					</p:column>
					<p:column headerText="Price">
						<p:outputLabel value="#{booking.price}"></p:outputLabel>
					</p:column>
					<p:column headerText="Persons number">
						<p:outputLabel value="#{booking.personsNumber}"></p:outputLabel>
					</p:column>
					<p:column headerText="Booking Status">
						<p:outputLabel value="#{booking.bookingStatus.name}"></p:outputLabel>
					</p:column>

					<p:column headerText="Created by">
						<p:outputLabel value="#{booking.createdBy.username}"></p:outputLabel>
					</p:column>
					<p:column headerText="Created on">
						<p:outputLabel value="#{booking.createdOn}"></p:outputLabel>
					</p:column>
					<p:column headerText="Updated by">
						<p:outputLabel value="#{booking.updatedBy.username}"></p:outputLabel>
					</p:column>
					<p:column headerText="Updated on">
						<p:outputLabel value="#{booking.updatedOn}"></p:outputLabel>
					</p:column>

					<p:column headerText="Actions">

						<p:commandButton value="Edit" update="editForm"
							process="@this" oncomplete="PF('EditDialog').show();">

							<f:setPropertyActionListener
								target="#{bookingManagedBean.booking}" value="#{booking}" />

						</p:commandButton>



						<p:commandButton immediate="true" value="Delete"
							update=":form:table growl" action="#{bookingManagedBean.delete}">
							<p:confirm header="Confirmation" message="Are you sure?"
								icon="pi pi-exclamation-triangle" />

							<f:setPropertyActionListener
								target="#{bookingManagedBean.booking}" value="#{booking}" />
						</p:commandButton>

						<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
							<p:commandButton value="Yes" type="button"
								styleClass="ui-confirmdialog-yes" icon="pi pi-check" />
							<p:commandButton value="No" type="button"
								styleClass="ui-confirmdialog-no" icon="pi pi-times" />
						</p:confirmDialog>

					</p:column>



				</p:dataTable>




			</h:form>

			<script type="text/javascript">
				PrimeFaces.locales ['de'] = {
					closeText: 'Schließen',
					prevText: 'Zurück',
					nextText: 'Weiter',
					monthNames: ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember' ],
					monthNamesShort: ['Jan', 'Feb', 'Mär', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez' ],
					dayNames: ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'],
					dayNamesShort: ['Son', 'Mon', 'Die', 'Mit', 'Don', 'Fre', 'Sam'],
					dayNamesMin: ['S', 'M', 'D', 'M ', 'D', 'F ', 'S'],
					weekHeader: 'Woche',
					firstDay: 1,
					isRTL: false,
					showMonthAfterYear: false,
					yearSuffix:'',
					timeOnlyTitle: 'Nur Zeit',
					timeText: 'Zeit',
					hourText: 'Stunde',
					minuteText: 'Minute',
					secondText: 'Sekunde',
					currentText: 'Aktuelles Datum',
					ampm: false,
					month: 'Monat',
					week: 'Woche',
					day: 'Tag',
					allDayText: 'Ganzer Tag'
				};
			</script>
			<h:form id="editForm">


				<p:dialog header="Edit Booking" id="updateDialog"
						  widgetVar="EditDialog" modal="true">


					<h:panelGrid columns="3">
						<p:outputLabel for="updateDate" value="Check out:" />
						<p:calendar id="button" value="#{calendarView.date3}" showOn="button" />

						<h:inputText id="updateDate" required="true"
									 value="#{bookingManagedBean.booking.checkOut}"></h:inputText>

						<p:outputLabel for="price" styleClass="p-col-fixed" style="width:100px" value="Price" />
						<br/>

						<p:inputNumber id="price" value="#{bookingManagedBean.booking.price}" symbol=" $" symbolPosition="s"
									   decimalSeparator="," thousandSeparator=".">
						</p:inputNumber>

						<h:outputLabel for="personsNumber" value="Beds number " />
						<br/>
						<p:spinner id="personsNumber" value="#{bookingManagedBean.booking.personsNumber}" min="1" max="50" />


						<p:commandButton process="updateDialog" update=":form:table growl"
										 value="Save" actionListener="#{bookingManagedBean.save}"
										 oncomplete="PF('EditDialog').hide();">

						</p:commandButton>



					</h:panelGrid>


				</p:dialog>




			</h:form>

	</h:body>
	</html>
